
---
import { Image } from 'astro:assets';
import Gallery01 from "../../public/images/gallery01.jpg";
import Gallery02 from "../../public/images/gallery02.jpg";
import Gallery03 from "../../public/images/gallery03.jpg";
import Gallery04 from "../../public/images/gallery04.jpg";
import Gallery05 from "../../public/images/gallery05.jpg";
import Gallery06 from "../../public/images/gallery06.jpg";
---

<div class="wrapper parallax-container">
    <Image 
        src={Gallery01}
        alt="A dried Banksia flower in a 'TAKE IT SLOW' inscribed brown bottle on a wooden table, in a cafe setting" 
        width={1130}
        height={1592}
    />
    <Image 
        src={Gallery02}
        alt="A silhouette of Antonio's wife holding a child looking out at a mountainous landscape, with artistic hearts overlay"
        width={1130}
        height={1592}
    />
    <Image 
        src={Gallery03}
        alt="A wall with post-it notes organized into columns labeled 'Values', 'Skills', and 'Needs', used for brainstorming or planning"
        width={840}
        height={1162}
    />
    <Image 
        src={Gallery04}
        alt="A computer screen displaying a website for 'visitBangalow' alongside a smartphone showing a food menu, depicting web and app design work"
        width={840}
        height={1162}
    />
    <Image 
        src={Gallery05}        
        alt="An inflatable Santa Claus with a surfboard in a suburban yard, celebrating a beach-themed Christmas"
        width={840}
        height={1162}
    />
    <Image 
        src={Gallery06}
        alt="Antonio and his son walking hand in hand on a rocky beach shore, with another person surfing in the background"
        width={1130}
        height={1592}
    />
</div>

<style>
    .parallax-container {
        display: grid;

        grid-column-gap: 16px;
        grid-row-gap: 16px;
        grid-template-rows: auto auto auto;
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
        grid-auto-columns: 1fr;

        img {
            border-radius: 1rem;
            will-change: transform;

            &:nth-child(1) {
                grid-area: 1/2/2/6;
                transform: translate3d(0px,232px, 0px);
            }
            &:nth-child(2) {
                grid-area: 1/9/2/13;
            }
            &:nth-child(3) {
                grid-area: 2/5/3/8;                
                transform: translate3d(0px,-176px, 0px);
                z-index: 1;
            }
            &:nth-child(4) {
                grid-area: 2/10/3/13;
                transform: translate3d(0px,232px, 0px);
                z-index: 1;
            }
            &:nth-child(5) {
                grid-area: 3/1/4/4;
                transform: translate3d(0px,-368px, 0px);
                z-index: 0;
            }
            &:nth-child(6) {
                grid-area: 3/7/4/11;
                z-index: 0;
            }
        }  
    }
</style>


<script>    
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

gsap.registerPlugin(ScrollTrigger);

document.addEventListener('DOMContentLoaded', () => {
  const images = document.querySelectorAll('.parallax-container img');

  images.forEach(img => {
    // Explicitly check if the attribute is not null before conversion; otherwise, default to 0
    const attributeValue = img.getAttribute('data-speed');
    const speed = attributeValue !== null ? +attributeValue : 0;

    gsap.to(img, {
      y: () => `-${window.scrollY * speed}px`,
      ease: 'none',
      scrollTrigger: {
        trigger: img,
        start: 'top bottom',
        scrub: true,
      },
    });
  });
});
</script>